<div class="conductor-detail-container">
  <!-- Header -->
  <div class="detail-header">
    <div class="header-left">
      <button class="btn-back" (click)="volverAtras()">
        <i class="fas fa-arrow-left"></i>
        Volver
      </button>
      <h1 class="page-title">Detalles del Conductor</h1>
    </div>
    
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="editarConductor()">
        <i class="fas fa-edit"></i>
        Editar
      </button>
      <button class="btn btn-danger" (click)="eliminarConductor()">
        <i class="fas fa-trash"></i>
        Eliminar
      </button>
    </div>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Cargando datos del conductor...</p>
    </div>
  }

  <!-- Error State -->
  @if (hasError()) {
    <div class="error-container">
      <i class="fas fa-exclamation-triangle"></i>
      <p>{{ hasError() }}</p>
      <button class="btn btn-primary" (click)="cargarConductor()">
        Reintentar
      </button>
    </div>
  }

  <!-- Conductor Details -->
  @if (currentConductor() && !isLoading() && !hasError()) {
    <div class="conductor-details">
      <div class="detail-card">
        <div class="card-header">
          <h2>Información Personal</h2>
        </div>
        <div class="card-content">
          <div class="detail-row">
            <div class="detail-label">DNI:</div>
            <div class="detail-value">{{ currentConductor()?.dni }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Nombres:</div>
            <div class="detail-value">{{ currentConductor()?.nombres }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Apellidos:</div>
            <div class="detail-value">{{ currentConductor()?.apellidos }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Fecha de Nacimiento:</div>
            <div class="detail-value">{{ formatearFecha(currentConductor()?.fechaNacimiento || '') }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Edad:</div>
            <div class="detail-value">{{ calcularEdad(currentConductor()?.fechaNacimiento || '') }} años</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Teléfono:</div>
            <div class="detail-value">{{ currentConductor()?.contacto?.telefono || 'No especificado' }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Email:</div>
            <div class="detail-value">{{ currentConductor()?.contacto?.email || 'No especificado' }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Dirección:</div>
            <div class="detail-value">{{ currentConductor()?.direccion }}</div>
          </div>
        </div>
      </div>

      <div class="detail-card">
        <div class="card-header">
          <h2>Información de Licencia</h2>
        </div>
        <div class="card-content">
          <div class="detail-row">
            <div class="detail-label">Número de Licencia:</div>
            <div class="detail-value">{{ currentConductor()?.licencia?.numero }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Categoría:</div>
            <div class="detail-value">{{ currentConductor()?.licencia?.categoria }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Fecha de Vencimiento:</div>
            <div class="detail-value" [class.vencida]="verificarLicenciaVencida(currentConductor()?.licencia?.fechaVencimiento || '')">
              {{ formatearFecha(currentConductor()?.licencia?.fechaVencimiento || '') }}
              @if (verificarLicenciaVencida(currentConductor()?.licencia?.fechaVencimiento || '')) {
                <span class="badge badge-danger">Vencida</span>
              } @else {
                <span class="badge badge-warning">{{ diasParaVencimiento(currentConductor()?.licencia?.fechaVencimiento || '') }} días</span>
              }
            </div>
          </div>
        </div>
      </div>

      <div class="detail-card">
        <div class="card-header">
          <h2>Estado del Conductor</h2>
        </div>
        <div class="card-content">
          <div class="detail-row">
            <div class="detail-label">Estado:</div>
            <div class="detail-value">
              <span class="badge" [class]="obtenerEstadoClass(currentConductor()?.estado || '')">
                {{ currentConductor()?.estado }}
              </span>
            </div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Fecha de Creación:</div>
            <div class="detail-value">{{ formatearFecha(currentConductor()?.fechaCreacion || '') }}</div>
          </div>
          <div class="detail-row">
            <div class="detail-label">Última Modificación:</div>
            <div class="detail-value">{{ formatearFecha(currentConductor()?.fechaModificacion || '') }}</div>
          </div>
        </div>
      </div>
    </div>
  }
</div> 