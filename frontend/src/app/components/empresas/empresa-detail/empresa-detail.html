<div class="empresa-detail-container">
  <!-- Loading -->
  @if (currentIsLoading()) {
    <div class="loading-container">
      <i class="fas fa-spinner fa-spin"></i>
      <span>Cargando información de la empresa...</span>
    </div>
  }

  <!-- Detalles de la empresa -->
  @if (!currentIsLoading() && currentEmpresa()) {
    <div class="empresa-detail">
      <!-- Header -->
      <div class="detail-header">
        <div class="header-content">
          <h1 class="detail-title">
            <i class="fas fa-building"></i>
            {{ currentEmpresa()?.razonSocial }}
          </h1>
          <p class="detail-subtitle">
            RUC: {{ currentEmpresa()?.ruc }}
          </p>
        </div>
        <div class="header-actions">
          <button class="btn btn-secondary" (click)="volverALista()">
            <i class="fas fa-arrow-left"></i>
            Volver
          </button>
          <button class="btn btn-primary" (click)="editarEmpresa()">
            <i class="fas fa-edit"></i>
            Editar
          </button>
        </div>
      </div>

      <!-- Información básica -->
      <div class="detail-section">
        <h2 class="section-title">
          <i class="fas fa-info-circle"></i>
          Información Básica
        </h2>
        <div class="info-grid">
          <div class="info-item">
            <label>RUC:</label>
            <span>{{ currentEmpresa()?.ruc }}</span>
          </div>
          <div class="info-item">
            <label>Razón Social:</label>
            <span>{{ currentEmpresa()?.razonSocial }}</span>
          </div>
          @if (currentEmpresa()?.razonSocialInterno) {
            <div class="info-item">
              <label>Razón Social Interno:</label>
              <span>{{ currentEmpresa()?.razonSocialInterno }}</span>
            </div>
          }
          <div class="info-item">
            <label>Nombre Comercial:</label>
            <span>{{ currentEmpresa()?.nombreComercial || 'No especificado' }}</span>
          </div>
          @if (currentEmpresa()?.nombreCorto) {
            <div class="info-item">
              <label>Nombre Corto:</label>
              <span>{{ currentEmpresa()?.nombreCorto }}</span>
            </div>
          }
          <div class="info-item">
            <label>Tipo de Empresa:</label>
            <span>{{ currentEmpresa()?.tipoEmpresa }}</span>
          </div>
          <div class="info-item">
            <label>Estado:</label>
            <span class="badge" [class]="getEstadoClass(currentEmpresa()?.estado!)">
              {{ currentEmpresa()?.estado }}
            </span>
          </div>
          <div class="info-item">
            <label>Fecha de Registro:</label>
            <span>{{ currentEmpresa()?.fechaCreacion | date:'dd/MM/yyyy' }}</span>
          </div>
        </div>
      </div>

      <!-- Expediente -->
      <div class="detail-section">
        <h2 class="section-title">
          <i class="fas fa-folder-open"></i>
          Información del Expediente
        </h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Número de Expediente:</label>
            <span class="expediente-numero">{{ currentEmpresa()?.expediente?.numero }}</span>
          </div>
          <div class="info-item">
            <label>Fecha del Expediente:</label>
            <span>{{ currentEmpresa()?.expediente?.fecha | date:'dd/MM/yyyy' }}</span>
          </div>
          <div class="info-item">
            <label>Estado del Expediente:</label>
            <span class="badge expediente-estado">{{ currentEmpresa()?.expediente?.estado }}</span>
          </div>
          @if (currentEmpresa()?.expediente?.observaciones) {
            <div class="info-item full-width">
              <label>Observaciones:</label>
              <span>{{ currentEmpresa()?.expediente?.observaciones }}</span>
            </div>
          }
        </div>
      </div>

      <!-- Representante Legal -->
      <div class="detail-section">
        <h2 class="section-title">
          <i class="fas fa-user-tie"></i>
          Representante Legal
        </h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Nombres:</label>
            <span>{{ currentEmpresa()?.representanteLegal?.nombres }}</span>
          </div>
          <div class="info-item">
            <label>Apellidos:</label>
            <span>{{ currentEmpresa()?.representanteLegal?.apellidos }}</span>
          </div>
          <div class="info-item">
            <label>DNI:</label>
            <span>{{ currentEmpresa()?.representanteLegal?.dni }}</span>
          </div>
          <div class="info-item">
            <label>Cargo:</label>
            <span>{{ currentEmpresa()?.representanteLegal?.cargo }}</span>
          </div>
          <div class="info-item">
            <label>Teléfono:</label>
            <span>{{ currentEmpresa()?.representanteLegal?.telefono }}</span>
          </div>
          <div class="info-item">
            <label>Email:</label>
            <span>{{ currentEmpresa()?.representanteLegal?.email }}</span>
          </div>
        </div>
      </div>

      <!-- Representante Legal Secundario -->
      @if (currentEmpresa()?.representanteLegalSecundario) {
        <div class="detail-section">
          <h2 class="section-title">
            <i class="fas fa-user-plus"></i>
            Representante Legal Secundario
          </h2>
          <div class="info-grid">
            <div class="info-item">
              <label>Nombres:</label>
              <span>{{ currentEmpresa()?.representanteLegalSecundario?.nombres }}</span>
            </div>
            <div class="info-item">
              <label>Apellidos:</label>
              <span>{{ currentEmpresa()?.representanteLegalSecundario?.apellidos }}</span>
            </div>
            <div class="info-item">
              <label>DNI:</label>
              <span>{{ currentEmpresa()?.representanteLegalSecundario?.dni }}</span>
            </div>
            <div class="info-item">
              <label>Cargo:</label>
              <span>{{ currentEmpresa()?.representanteLegalSecundario?.cargo }}</span>
            </div>
            <div class="info-item">
              <label>Teléfono:</label>
              <span>{{ currentEmpresa()?.representanteLegalSecundario?.telefono }}</span>
            </div>
            <div class="info-item">
              <label>Email:</label>
              <span>{{ currentEmpresa()?.representanteLegalSecundario?.email }}</span>
            </div>
          </div>
        </div>
      }

      <!-- Dirección -->
      <div class="detail-section">
        <h2 class="section-title">
          <i class="fas fa-map-marker-alt"></i>
          Dirección
        </h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Departamento:</label>
            <span>{{ currentEmpresa()?.direccion?.departamento }}</span>
          </div>
          <div class="info-item">
            <label>Provincia:</label>
            <span>{{ currentEmpresa()?.direccion?.provincia }}</span>
          </div>
          <div class="info-item">
            <label>Distrito:</label>
            <span>{{ currentEmpresa()?.direccion?.distrito }}</span>
          </div>
          <div class="info-item full-width">
            <label>Dirección:</label>
            <span>{{ currentEmpresa()?.direccion?.calle }} {{ currentEmpresa()?.direccion?.numero }}</span>
          </div>
          @if (currentEmpresa()?.direccion?.referencia) {
            <div class="info-item full-width">
              <label>Referencia:</label>
              <span>{{ currentEmpresa()?.direccion?.referencia }}</span>
            </div>
          }
        </div>
      </div>

      <!-- Información de Contacto -->
      <div class="detail-section">
        <h2 class="section-title">
          <i class="fas fa-phone"></i>
          Información de Contacto
        </h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Teléfono:</label>
            <span>{{ currentEmpresa()?.telefono }}</span>
          </div>
          <div class="info-item">
            <label>Email:</label>
            <span>{{ currentEmpresa()?.email }}</span>
          </div>
          @if (currentEmpresa()?.sitioWeb) {
            <div class="info-item">
              <label>Sitio Web:</label>
              <span>{{ currentEmpresa()?.sitioWeb }}</span>
            </div>
          }
          <div class="info-item">
            <label>Fecha de Constitución:</label>
            <span>{{ currentEmpresa()?.fechaConstitucion | date:'dd/MM/yyyy' }}</span>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Error o empresa no encontrada -->
  @if (!currentIsLoading() && !currentEmpresa()) {
    <div class="error-container">
      <i class="fas fa-exclamation-triangle"></i>
      <h3>Empresa no encontrada</h3>
      <p>La empresa que buscas no existe o ha sido eliminada.</p>
      <button class="btn btn-primary" (click)="volverALista()">
        Volver a la lista
      </button>
    </div>
  }
</div> 